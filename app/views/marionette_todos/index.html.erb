<%= javascript_include_tag "marionette_init.js"%>
<%= javascript_include_tag "marionette_todos.js"%>

<script type="text/javascript">
  $(function(){
    MarionetteTodosApp.currentRouter = new MarionetteTodosApp.Routers.Todos(<%= @todos.to_json.html_safe %>);
  });
</script>

<script type="text/template" id="todo_index">
  <div class="notebook" >
    <div class="body">
    <h4>
      Todos
      <span id="filters" class="pull-right">
        <i id="reset" title="Refresh List" class="icon-refresh"></i>
        <i id="filter-done" title="Filter Done" class="icon-ok"></i>
        <i id="filter-pending" title="Filter Pending" class="icon-time"></i>
      </span>
    </h4>
      <ul class="list">
        <li id="add-todo">
          <div class="lines"></div>
          <span id="todo-display-add">
            add new todo
          </span>
          <span id="todo-addable" style="display:none" >
            <input class="todo-item-input" id="add-todo-value" type="text">
            <i id="hide-add-todo" title="Cancel" class="icon-remove"></i>
          </span>
          <span class="pull-right">
            <i title="Add New Todo" class="icon-plus"></i>
          </span>
        </li>
      </ul>
    </div>
  </div>
</script>

<script type="text/template" id="todo_item">
  <div class="lines"></div>
  <span>
    <i id="todo-checkbox" style="text-indent: -10px" title="Check Todo" class="icon-check{%todo.status == <%= Todo::PENDING %> ?'-empty' : '' %}"></i>
    <span id="todo-display-edit" class="{% todo.status == <%= Todo::DONE %> ? 'checked' : '' %}">
      {%todo.item%}
    </span>
    <span id="todo-editable" style="display:none" >
      <input class="todo-item-input" id="edit-todo-value" value="{%todo.item%}" type="text">
      <i title="Cancel Edit" class="icon-remove"></i>
    </span>
  </span>
  <span class="pull-right">
    <i id="edit-todo" title="Edit Todo" class="icon-edit"></i>
    <i id="remove-todo" title="Remove Todo" class="icon-trash"></i>
  </span>
</script>
